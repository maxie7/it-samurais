{"version":3,"sources":["components/profile/profileInfo/ProfileInfo.module.css","components/profile/myPosts/post/Post.module.css","components/profile/myPosts/MyPosts.module.css","components/profile/profileInfo/ProfileStatusWithHooks.jsx","components/profile/profileInfo/ProfileInfo.jsx","components/profile/myPosts/post/Post.jsx","components/profile/myPosts/MyPosts.jsx","components/profile/myPosts/MyPostsContainer.jsx","components/profile/Profile.jsx","components/profile/ProfileContainer.jsx"],"names":["module","exports","ProfileStatusWithHooks","props","useState","editMode","setEditMode","status","setStatus","useEffect","onDoubleClick","autoFocus","onChange","e","currentTarget","value","onBlur","updateStatus","ProfileInfo","profile","isOwner","savePhoto","className","classes","descriptionBlock","alt","src","photos","large","userPhoto","mainPhoto","type","target","files","length","Post","item","message","likes","maxLength10","maxLengthCreator","AddNewPostFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","component","Textarea","name","validate","required","placeholder","MyPosts","React","memo","postsElements","posts","reverse","map","post","postsBlock","values","addPost","newPostText","MyPostsContainer","connect","state","profilePage","dispatch","addPostActionCreator","Profile","ProfileContainer","userId","this","match","params","authorizedUserId","history","push","getUserProfile","getStatus","refreshProfile","prevProps","prevState","snapshot","Component","compose","auth","isAuth","withRouter"],"mappings":"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","file":"static/js/3.f90eec7f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__1_dDl\",\"mainPhoto\":\"ProfileInfo_mainPhoto__GHdfX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__2CmLy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__3xtRD\",\"posts\":\"MyPosts_posts__1_rT9\"};","import React, {useEffect, useState} from 'react';\nimport s from './ProfileInfo.module.css';\n\nconst ProfileStatusWithHooks = (props) => {\n  let [editMode, setEditMode] = useState(false);\n  let [status, setStatus] = useState(props.status);\n\n  useEffect( () => {\n    setStatus(props.status);\n  }, [props.status] );\n\n  const activateEditMode = () => {\n    setEditMode(true);\n  }\n\n  const deactivateEditMode = () => {\n    setEditMode(false);\n    props.updateStatus(status);\n  }\n\n  const onStatusChange = (e) => {\n    setStatus(e.currentTarget.value);\n  }\n\n  return (\n    <div>\n      { !editMode &&\n        <div>\n          <span  onDoubleClick={ activateEditMode }>{props.status || \"------\"} </span>\n        </div>\n      }\n      { editMode &&\n        <div>\n          <input autoFocus={ true }\n                 onChange={ onStatusChange }\n                 onBlur={ deactivateEditMode }\n                 value={ status }\n          />\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default ProfileStatusWithHooks;","import React from 'react';\nimport classes from './ProfileInfo.module.css';\nimport Preloader from \"../../common/preloader/preloader\";\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\nimport userPhoto from \"../../../assets/img/default_avatar.jpeg\";\n\nconst ProfileInfo = ({profile, status, updateStatus, isOwner, savePhoto}) => {\n  if (!profile) {\n    return <Preloader />\n  }\n\n  const onMainPhotoSelected = (e) => {\n    if (e.target.files.length) {\n      savePhoto(e.target.files[0]);\n    }\n  }\n\n  return (\n    <div>\n      <div className={classes.descriptionBlock}>\n        <img alt='' src={profile.photos.large || userPhoto} className={classes.mainPhoto} />\n        { isOwner && <input type={\"file\"} onChange={onMainPhotoSelected} /> }\n        <ProfileStatusWithHooks status={status} updateStatus={updateStatus} />\n      </div>\n    </div>\n  )\n}\n\nexport default ProfileInfo;\n","import React from 'react';\nimport classes from './Post.module.css';\n\nconst Post = (props) => {\n\n  return (\n    <div className={classes.item}>\n      <img alt='' src='https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fvignette1.wikia.nocookie.net%2Fjamescameronsavatar%2Fimages%2Ff%2Ffe%2FTypical_tsu%2527tey%2528mad_attitude%2529.jpg%2Frevision%2Flatest%3Fcb%3D20110624105006&f=1&nofb=1' />\n      {props.message}\n      <div>\n        <span>like</span><br />\n        <span>{props.likes}</span>\n      </div>\n    </div>\n  )\n}\n\nexport default Post;","import React from 'react';\nimport Post from './post/Post';\nimport classes from './MyPosts.module.css';\nimport {Field, reduxForm} from \"redux-form\";\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\";\nimport {Textarea} from \"../../common/formsControls/formsControls\";\n\nconst maxLength10 = maxLengthCreator(10);\n\nlet AddNewPostForm = (props) => {\n  return (\n    <form onSubmit={ props.handleSubmit }>\n      <div>\n        <Field component={Textarea}\n               name={\"newPostText\"}\n               validate={[required, maxLength10]}\n               placeholder=\"Add new post text\" />\n      </div>\n      <div>\n        <button>Add post</button>\n      </div>\n    </form>\n  )\n}\n\nlet AddNewPostFormRedux = reduxForm({ form: \"profileAddNewPostForm\" })(AddNewPostForm);\n\nconst MyPosts = React.memo(props => {\n  let postsElements =\n    [...props.posts]\n    .reverse()\n    .map(post => <Post message={post.message} likes={post.likes}/>);\n  // let newPostElement = React.createRef();\n\n  let onAddPost = (values) => {\n    props.addPost(values.newPostText);\n  }\n\n  return (\n    <div className={classes.postsBlock}>\n      <h3>My posts</h3>\n      <AddNewPostFormRedux onSubmit={onAddPost} />\n      <div className={classes.posts}>\n        {postsElements}\n      </div>\n    </div>\n  )\n});\n\nexport default MyPosts;","import React from \"react\";\nimport { addPostActionCreator } from \"../../../redux/profile.reducer\";\nimport MyPosts from \"./MyPosts\";\nimport {connect} from \"react-redux\";\n\nlet mapStateToProps = (state) => {\n  return {\n    posts: state.profilePage.posts,\n    newPostText: state.profilePage.newPostText\n  }\n}\n\nlet mapDispatchToProps = (dispatch) => {\n  return {\n    addPost: (newPostText) => {\n      dispatch(addPostActionCreator(newPostText));\n    }\n  }\n}\n\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\n\nexport default MyPostsContainer;","import React from 'react';\nimport ProfileInfo from \"./profileInfo/ProfileInfo\";\nimport MyPostsContainer from \"./myPosts/MyPostsContainer\";\n\nconst Profile = (props) => {\n  return (\n    <div>\n      <ProfileInfo savePhoto={props.savePhoto}\n                   isOwner={props.isOwner}\n                   profile={props.profile}\n                   status={props.status}\n                   updateStatus={props.updateStatus} />\n      <MyPostsContainer />\n    </div>\n  )\n}\n\nexport default Profile;\n","import React from 'react';\nimport {connect} from \"react-redux\";\nimport Profile from \"./Profile\";\nimport {getStatus, getUserProfile, savePhoto, updateStatus} from \"../../redux/profile.reducer\";\nimport {withRouter} from \"react-router-dom\";\nimport {compose} from \"redux\";\n\nclass ProfileContainer extends React.Component {\n\n  refreshProfile() {\n    let userId = this.props.match.params.userId;\n    if (!userId) {\n      userId = this.props.authorizedUserId;\n      if (!userId) {\n        this.props.history.push(\"/login\");\n      }\n    }\n    this.props.getUserProfile(userId);\n    this.props.getStatus(userId);\n  }\n\n  componentDidMount() {\n    this.refreshProfile();\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.props.match.params.userId !== prevProps.match.params.userId) {\n      this.refreshProfile();\n    }\n  }\n\n  render() {\n    return (\n      <Profile {...this.props}\n               isOwner={!this.props.match.params.userId}\n               profile={this.props.profile}\n               status={this.props.status}\n               updateStatus={this.props.updateStatus}\n               savePhoto={this.props.savePhoto} />\n    )\n  }\n}\n\nlet mapStateToProps = (state) => ({\n  profile: state.profilePage.profile,\n  status:  state.profilePage.status,\n  authorizedUserId: state.auth.userId,\n  isAuth: state.auth.isAuth\n});\n\nexport default compose(\n  connect(mapStateToProps, { getUserProfile, getStatus, updateStatus, savePhoto }),\n  withRouter\n)(ProfileContainer);\n"],"sourceRoot":""}